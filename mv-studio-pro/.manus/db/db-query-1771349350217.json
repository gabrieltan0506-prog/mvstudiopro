{
  "query": "CREATE TABLE IF NOT EXISTS `coupons` (\n\t`id` int AUTO_INCREMENT NOT NULL,\n\t`code` varchar(50) NOT NULL,\n\t`discountPercent` int NOT NULL DEFAULT 0,\n\t`discountAmount` decimal(10,2),\n\t`maxUses` int NOT NULL DEFAULT 100,\n\t`usedCount` int NOT NULL DEFAULT 0,\n\t`expiresAt` timestamp,\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\tCONSTRAINT `coupons_id` PRIMARY KEY(`id`),\n\tCONSTRAINT `coupons_code_unique` UNIQUE(`code`)\n);\n\nCREATE TABLE IF NOT EXISTS `credit_balances` (\n\t`id` int AUTO_INCREMENT NOT NULL,\n\t`userId` int NOT NULL,\n\t`balance` int NOT NULL DEFAULT 0,\n\t`lifetimeEarned` int NOT NULL DEFAULT 0,\n\t`lifetimeSpent` int NOT NULL DEFAULT 0,\n\t`updatedAt` timestamp NOT NULL DEFAULT (now()) ON UPDATE CURRENT_TIMESTAMP,\n\tCONSTRAINT `credit_balances_id` PRIMARY KEY(`id`),\n\tCONSTRAINT `credit_balances_userId_unique` UNIQUE(`userId`)\n);\n\nCREATE TABLE IF NOT EXISTS `credit_transactions` (\n\t`id` int AUTO_INCREMENT NOT NULL,\n\t`userId` int NOT NULL,\n\t`amount` int NOT NULL,\n\t`type` varchar(20) NOT NULL,\n\t`source` varchar(50) NOT NULL,\n\t`action` varchar(50),\n\t`description` text,\n\t`balanceAfter` int NOT NULL,\n\t`stripePaymentIntentId` varchar(255),\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\tCONSTRAINT `credit_transactions_id` PRIMARY KEY(`id`)\n);\n\nCREATE TABLE IF NOT EXISTS `stripe_customers` (\n\t`id` int AUTO_INCREMENT NOT NULL,\n\t`userId` int NOT NULL,\n\t`stripeCustomerId` varchar(255) NOT NULL,\n\t`plan` varchar(20) NOT NULL DEFAULT 'free',\n\t`stripeSubscriptionId` varchar(255),\n\t`trialEndsAt` timestamp,\n\t`currentPeriodEnd` timestamp,\n\t`cancelAtPeriodEnd` int NOT NULL DEFAULT 0,\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\t`updatedAt` timestamp NOT NULL DEFAULT (now()) ON UPDATE CURRENT_TIMESTAMP,\n\tCONSTRAINT `stripe_customers_id` PRIMARY KEY(`id`),\n\tCONSTRAINT `stripe_customers_userId_unique` UNIQUE(`userId`),\n\tCONSTRAINT `stripe_customers_stripeCustomerId_unique` UNIQUE(`stripeCustomerId`)\n);\n\nCREATE TABLE IF NOT EXISTS `stripe_usage_logs` (\n\t`id` int AUTO_INCREMENT NOT NULL,\n\t`userId` int NOT NULL,\n\t`action` varchar(50) NOT NULL,\n\t`creditsCost` int NOT NULL DEFAULT 0,\n\t`isFreeQuota` int NOT NULL DEFAULT 0,\n\t`description` text,\n\t`balanceAfter` int,\n\t`metadata` text,\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\tCONSTRAINT `stripe_usage_logs_id` PRIMARY KEY(`id`)\n);",
  "command": "mysql --batch --raw --column-names --default-character-set=utf8mb4 --host gateway02.us-east-1.prod.aws.tidbcloud.com --port 4000 --user 1eAqNqce666eDxh.ea4f3b5bd2a0 --database ZcSpbTjo8yTZWfuGuozyuC --execute CREATE TABLE IF NOT EXISTS `coupons` (\n\t`id` int AUTO_INCREMENT NOT NULL,\n\t`code` varchar(50) NOT NULL,\n\t`discountPercent` int NOT NULL DEFAULT 0,\n\t`discountAmount` decimal(10,2),\n\t`maxUses` int NOT NULL DEFAULT 100,\n\t`usedCount` int NOT NULL DEFAULT 0,\n\t`expiresAt` timestamp,\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\tCONSTRAINT `coupons_id` PRIMARY KEY(`id`),\n\tCONSTRAINT `coupons_code_unique` UNIQUE(`code`)\n);\n\nCREATE TABLE IF NOT EXISTS `credit_balances` (\n\t`id` int AUTO_INCREMENT NOT NULL,\n\t`userId` int NOT NULL,\n\t`balance` int NOT NULL DEFAULT 0,\n\t`lifetimeEarned` int NOT NULL DEFAULT 0,\n\t`lifetimeSpent` int NOT NULL DEFAULT 0,\n\t`updatedAt` timestamp NOT NULL DEFAULT (now()) ON UPDATE CURRENT_TIMESTAMP,\n\tCONSTRAINT `credit_balances_id` PRIMARY KEY(`id`),\n\tCONSTRAINT `credit_balances_userId_unique` UNIQUE(`userId`)\n);\n\nCREATE TABLE IF NOT EXISTS `credit_transactions` (\n\t`id` int AUTO_INCREMENT NOT NULL,\n\t`userId` int NOT NULL,\n\t`amount` int NOT NULL,\n\t`type` varchar(20) NOT NULL,\n\t`source` varchar(50) NOT NULL,\n\t`action` varchar(50),\n\t`description` text,\n\t`balanceAfter` int NOT NULL,\n\t`stripePaymentIntentId` varchar(255),\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\tCONSTRAINT `credit_transactions_id` PRIMARY KEY(`id`)\n);\n\nCREATE TABLE IF NOT EXISTS `stripe_customers` (\n\t`id` int AUTO_INCREMENT NOT NULL,\n\t`userId` int NOT NULL,\n\t`stripeCustomerId` varchar(255) NOT NULL,\n\t`plan` varchar(20) NOT NULL DEFAULT 'free',\n\t`stripeSubscriptionId` varchar(255),\n\t`trialEndsAt` timestamp,\n\t`currentPeriodEnd` timestamp,\n\t`cancelAtPeriodEnd` int NOT NULL DEFAULT 0,\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\t`updatedAt` timestamp NOT NULL DEFAULT (now()) ON UPDATE CURRENT_TIMESTAMP,\n\tCONSTRAINT `stripe_customers_id` PRIMARY KEY(`id`),\n\tCONSTRAINT `stripe_customers_userId_unique` UNIQUE(`userId`),\n\tCONSTRAINT `stripe_customers_stripeCustomerId_unique` UNIQUE(`stripeCustomerId`)\n);\n\nCREATE TABLE IF NOT EXISTS `stripe_usage_logs` (\n\t`id` int AUTO_INCREMENT NOT NULL,\n\t`userId` int NOT NULL,\n\t`action` varchar(50) NOT NULL,\n\t`creditsCost` int NOT NULL DEFAULT 0,\n\t`isFreeQuota` int NOT NULL DEFAULT 0,\n\t`description` text,\n\t`balanceAfter` int,\n\t`metadata` text,\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\tCONSTRAINT `stripe_usage_logs_id` PRIMARY KEY(`id`)\n);",
  "rows": [],
  "messages": [],
  "stdout": "",
  "stderr": "",
  "execution_time_ms": 2496
}